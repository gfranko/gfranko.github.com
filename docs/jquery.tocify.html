<!DOCTYPE html>  <html> <head>   <title>jquery.tocify.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jquery.tocify.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/* jquery Tocify - v0.3.0 - 2012-08-15</span>
<span class="cm">* http://www.gregfranko.com/jquery.tocify.js/</span>
<span class="cm">* Copyright (c) 2012 Greg Franko; Licensed MIT */</span>

</pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Immediately-Invoked Function Expression (IIFE) <a href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/">Ben Alman Blog Post</a> that calls another IIFE that contains all of the plugin logic.  I used this pattern so that anyone viewing this code would not have to scroll to the bottom of the page to view the local parameters that were passed to the main IIFE.</p>             </td>             <td class="code">               <div class="highlight"><pre>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tocify</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>ECMAScript 5 Strict Mode: <a href="http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/">John Resig Blog Post</a></p>             </td>             <td class="code">               <div class="highlight"><pre>
    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Calls the second IIFE and locally passes in the global jQuery, window, and document objects</p>             </td>             <td class="code">               <div class="highlight"><pre>
    <span class="nx">tocify</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">);</span>

<span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Locally passes in <code>jQuery</code>, the <code>window</code> object, the <code>document</code> object, and an <code>undefined</code> variable.  The <code>jQuery</code>, <code>window</code> and <code>document</code> objects are passed in locally, to improve performance, since javascript first searches for a variable match within the local variables set before searching the global variables set.  All of the global variables are also passed in locally to be minifier friendly. <code>undefined</code> can be passed in locally, because it is not a reserved word in JavaScript.</p>             </td>             <td class="code">               <div class="highlight"><pre>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>ECMAScript 5 Strict Mode: <a href="http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/">John Resig Blog Post</a></p>             </td>             <td class="code">               <div class="highlight"><pre>
    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Calling the jQueryUI Widget Factory Method</p>             </td>             <td class="code">               <div class="highlight"><pre>
    <span class="nx">$</span><span class="p">.</span><span class="nx">widget</span><span class="p">(</span><span class="s2">&quot;toc.tocify&quot;</span><span class="p">,</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Plugin version</p>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>These options will be used as defaults</p>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p><strong>context</strong>: Accepts String: Any jQuery selector
The container element that holds all of the elements used to generate the table of contents</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">context</span><span class="o">:</span> <span class="s2">&quot;body&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p><strong>selectors</strong>: Accepts an Array of Strings: Any jQuery selectors
The element's used to generate the table of contents.  The order is very important since it will determine the table of content's nesting structure</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">selectors</span><span class="o">:</span> <span class="s2">&quot;h1, h2, h3&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p><strong>showAndHide</strong>: Accepts a boolean: true or false
Used to determine if elements should be shown and hidden</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">showAndHide</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p><strong>showEffect</strong>: Accepts String: "none", "fadeIn", "show", or "slideDown"
Used to display any of the table of contents nested items</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">showEffect</span><span class="o">:</span> <span class="s2">&quot;slideDown&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p><strong>showEffectSpeed</strong>: Accepts Number (milliseconds) or String: "slow", "medium", or "fast"
The time duration of the show animation</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">showEffectSpeed</span><span class="o">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p><strong>hideEffect</strong>: Accepts String: "none", "fadeOut", "hide", or "slideUp"
Used to hide any of the table of contents nested items</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">hideEffect</span><span class="o">:</span> <span class="s2">&quot;slideUp&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p><strong>hideEffectSpeed</strong>: Accepts Number (milliseconds) or String: "slow", "medium", or "fast"
The time duration of the hide animation</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">hideEffectSpeed</span><span class="o">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p><strong>smoothScroll</strong>: Accepts a boolean: true or false
Determines if a jQuery animation should be used to scroll to specific table of contents items on the page</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">smoothScroll</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p><strong>smoothScrollSpeed</strong>: Accepts Number (milliseconds) or String: "slow", "medium", or "fast"
The time duration of the smoothScroll animation</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">smoothScrollSpeed</span><span class="o">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p><strong>scrollTo</strong>: Accepts Number (pixels)
The amount of space between the top of page and the selected table of contents item after the page has been scrolled</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">scrollTo</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p><strong>showAndHideOnScroll</strong>: Accepts a boolean: true or false
Determines if table of contents nested items should be shown and hidden while scrolling</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">showAndHideOnScroll</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p><strong>highlightOnScroll</strong>: Accepts a boolean: true or false
Determines if table of contents nested items should be highlighted (set to a different color) while scrolling</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">highlightOnScroll</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p><strong>highlightOffset</strong>: Accepts a number
The offset distance in pixels to trigger the next active table of contents item</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">highlightOffset</span><span class="o">:</span> <span class="mi">40</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p><strong>jqueryUI</strong>: Accepts a boolean: true or false
Determines if jQueryUI classes should be added to the table of contents</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">jqueryUI</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p><strong>extendPage</strong>: Accepts a boolean: true or false
If a user scrolls to the bottom of the page and the page is not tall enough to scroll to the last table of contents item, then the page height is increased</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">extendPage</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <h2>_Create</h2>

<pre><code> Constructs the plugin.  Only called once.
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">_create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Generates the HTML for the dynamic table of contents</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">this</span><span class="p">.</span><span class="nx">_generateToc</span><span class="p">();</span>

</pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Adds jQuery event handlers to the newly generated table of contents</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">this</span><span class="p">.</span><span class="nx">_setEventHandlers</span><span class="p">();</span>

</pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Adds CSS classes to the newly generated table of contents HTML</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">this</span><span class="p">.</span><span class="nx">_addCSSClasses</span><span class="p">();</span>

        <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <h2>_generateToc</h2>

<pre><code> Generates the HTML for the dynamic table of contents
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">_generateToc</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p><em>Local variables</em></p>             </td>             <td class="code">               <div class="highlight"><pre>

</pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Stores the plugin context in the self variable</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>All of the HTML tags found within the context provided (i.e. body) that match the top level jQuery selector above</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">firstElem</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Instantiated variable that will store the top level newly created unordered list DOM element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">ul</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Instantiated variable that will store a header DOM element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">previousHeader</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>If the selectors option has a comma within the string</p>             </td>             <td class="code">               <div class="highlight"><pre>
             <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selectors</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Grabs the first selector from the string</p>             </td>             <td class="code">               <div class="highlight"><pre>
                 <span class="nx">firstElem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">context</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selectors</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ /g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selectors</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)));</span>

             <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>If the selectors option does not have a comman within the string</p>             </td>             <td class="code">               <div class="highlight"><pre>
             <span class="k">else</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Grabs the first selector from the string and makes sure there are no spaces</p>             </td>             <td class="code">               <div class="highlight"><pre>
                 <span class="nx">firstElem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">context</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selectors</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ /g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">));</span>

             <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Loops through each top level selector</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">firstElem</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Creates an unordered list HTML element and adds a dynamic ID and standard class name</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">ul</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;ul/&gt;&quot;</span><span class="p">,</span> <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Header&quot;</span> <span class="o">+</span> <span class="nx">index</span><span class="p">,</span>
                    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;header&quot;</span>
                <span class="p">}).</span>

</pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Appends a top level list item HTML element to the previously created HTML header</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">append</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_nestElements</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">index</span><span class="p">));</span>

</pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Add the created unordered list element to the HTML element calling the plugin</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">ul</span><span class="p">);</span>

</pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Adds all of the HTML tags within each top level selector to an array</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">nextUntil</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selectors</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Finds the previous header DOM element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="nx">previousHeader</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">prevAll</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selectors</span><span class="p">).</span><span class="nx">first</span><span class="p">();</span>

</pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>If the current header DOM element is smaller than the previous header DOM element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="k">if</span><span class="p">(</span><span class="o">+</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="o">+</span><span class="nx">previousHeader</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Selects the last unordered list HTML found within the HTML element calling the plugin</p>             </td>             <td class="code">               <div class="highlight"><pre>
                            <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">).</span><span class="nx">last</span><span class="p">().</span><span class="nx">after</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_nestElements</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">index</span><span class="p">));</span>

                        <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>If the current header DOM element is the same type of header(eg. h4) as the previous header DOM element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">+</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="o">+</span><span class="nx">previousHeader</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>

                            <span class="nx">ul</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.item&quot;</span><span class="p">).</span><span class="nx">last</span><span class="p">().</span><span class="nx">after</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_nestElements</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">index</span><span class="p">));</span>

                        <span class="p">}</span>

                        <span class="k">else</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Selects the last unordered list HTML found within the HTML element calling the plugin</p>             </td>             <td class="code">               <div class="highlight"><pre>
                            <span class="nx">ul</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.item&quot;</span><span class="p">).</span><span class="nx">last</span><span class="p">().</span>

</pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Appends an unorderedList HTML element to the dynamic <code>unorderedList</code> variable and sets a common class name</p>             </td>             <td class="code">               <div class="highlight"><pre>
                            <span class="nx">after</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;ul/&gt;&quot;</span><span class="p">,</span> <span class="p">{</span>
                                <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;sub-header&quot;</span>
                            <span class="p">})).</span><span class="nx">next</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">).</span>

</pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin</p>             </td>             <td class="code">               <div class="highlight"><pre>
                            <span class="nx">append</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_nestElements</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">index</span><span class="p">));</span>
                        <span class="p">}</span>

                <span class="p">});</span>

            <span class="p">});</span>

        <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <h2>_nestElements</h2>

<pre><code> Helps create the table of contents list and adds div "anchors" to the page
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">_nestElements</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;li/&gt;&quot;</span><span class="p">,</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Sets the list item's text value to the text of the currently traversed HTML element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">(),</span>

</pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Sets a common class name to the list item</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;item&quot;</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Sets the list item's HTML5 data attribute, <code>data-href</code>, to the currently traversed HTML element (also making sure that all whitespace is replaced with an underscore)</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="s2">&quot;data-href&quot;</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>

                <span class="s2">&quot;data-unique&quot;</span><span class="o">:</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span> <span class="o">+</span> <span class="nx">index</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="p">});</span>

</pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Adds an HTML anchor tag before the currently traversed HTML element</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">self</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;div/&gt;&quot;</span><span class="p">,</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Sets a name attribute on the anchor tag to the text of the currently traversed HTML element (also making sure that all whitespace is replaced with an underscore)</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>

                <span class="s2">&quot;data-unique&quot;</span><span class="o">:</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span> <span class="o">+</span> <span class="nx">index</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="p">}));</span>

            <span class="k">return</span> <span class="nx">item</span><span class="p">;</span>

        <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <h2>_setEventHandlers</h2>

<pre><code> Adds jQuery event handlers to the newly generated table of contents
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">_setEventHandlers</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p><em>Local variables</em></p>             </td>             <td class="code">               <div class="highlight"><pre>

</pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Stores the plugin context in the self variable</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>Instantiates a new variable that will be used to hold a specific element's context</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">$self</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>Instantiates a new variable that will be used to determine the smoothScroll animation time duration</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">duration</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Event delegation that looks for any clicks on list item elements inside of the HTML element calling the plugin</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click.tocify&quot;</span><span class="p">,</span> <span class="s2">&quot;li&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>If the History.js plugin has been included on the page</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">History</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">History</span><span class="p">.</span><span class="nx">Adapter</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>Adds a new state and url to the history</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nb">window</span><span class="p">.</span><span class="nx">History</span><span class="p">.</span><span class="nx">pushState</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-href&quot;</span><span class="p">),</span> <span class="s2">&quot;?&quot;</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-href&quot;</span><span class="p">));</span>

                <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <p>Removes highlighting from all of the list item's</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">self</span><span class="p">.</span><span class="nx">focusClass</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">focusClass</span><span class="p">);</span>

</pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-67">&#182;</a>               </div>               <p>Highlights the current list item that was clicked</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">focusClass</span><span class="p">);</span>

</pre></div>             </td>           </tr>                               <tr id="section-68">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-68">&#182;</a>               </div>               <p>If the History.js plugin has not been included on the page</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">History</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">History</span><span class="p">.</span><span class="nx">Adapter</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showAndHide</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-69">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-69">&#182;</a>               </div>               <p>Show the all of the sub-headers within the current header</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nx">self</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;.header&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">));</span>

                <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-70">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-70">&#182;</a>               </div>               <p>Saves the currently clicked list item's context in the <code>$self</code> variable</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">$self</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

</pre></div>             </td>           </tr>                               <tr id="section-71">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-71">&#182;</a>               </div>               <p>If the <code>smoothScroll</code> option is true</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">smoothScroll</span><span class="p">)</span> <span class="p">{</span>
                    
</pre></div>             </td>           </tr>                               <tr id="section-72">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-72">&#182;</a>               </div>               <p>Sets the <code>duration</code> local variable to the <code>smoothScrollSpeed</code> option</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nx">duration</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">smoothScrollSpeed</span><span class="p">;</span>
                    
                <span class="p">}</span>

                <span class="k">else</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-73">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-73">&#182;</a>               </div>               <p>Sets the <code>duration</code> local variable to 0</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nx">duration</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-74">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-74">&#182;</a>               </div>               <p>Animates the html and body element scrolltops</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;html, body&quot;</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span>

</pre></div>             </td>           </tr>                               <tr id="section-75">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-75">&#182;</a>               </div>               <p>Sets the jQuery <code>scrollTop</code> to the top offset of the HTML div tag that matches the current list item's <code>data-href</code> tag</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="s2">&quot;scrollTop&quot;</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div[data-unique=&quot;&#39;</span> <span class="o">+</span> <span class="nx">$self</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-unique&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">scrollTo</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
                        
                <span class="p">},</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-76">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-76">&#182;</a>               </div>               <p>Sets the smoothScroll animation time duration to the smoothScrollSpeed option</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="s2">&quot;duration&quot;</span><span class="o">:</span> <span class="nx">duration</span>

                <span class="p">});</span>

</pre></div>             </td>           </tr>                               <tr id="section-77">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-77">&#182;</a>               </div>               <p>Animates the table of contents scrolltop</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span>

</pre></div>             </td>           </tr>                               <tr id="section-78">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-78">&#182;</a>               </div>               <p>Sets the jQuery <code>scrollTop</code> to the top offset of the current HTML li tag</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="s2">&quot;scrollTop&quot;</span><span class="o">:</span> <span class="nx">$self</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
                        
                <span class="p">},</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-79">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-79">&#182;</a>               </div>               <p>Sets the smoothScroll animation time duration to the smoothScrollSpeed option</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="s2">&quot;duration&quot;</span><span class="o">:</span> <span class="nx">duration</span>

                <span class="p">});</span>

            <span class="p">});</span>

</pre></div>             </td>           </tr>                               <tr id="section-80">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-80">&#182;</a>               </div>               <p>Mouseenter and Mouseleave event handlers for the list item's within the HTML element calling the plugin</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">({</span>

</pre></div>             </td>           </tr>                               <tr id="section-81">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-81">&#182;</a>               </div>               <p>Mouseenter event handler</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="s2">&quot;mouseenter.tocify&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-82">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-82">&#182;</a>               </div>               <p>Adds a hover CSS class to the current list item</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">hoverClass</span><span class="p">);</span>

</pre></div>             </td>           </tr>                               <tr id="section-83">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-83">&#182;</a>               </div>               <p>Makes sure the cursor is set to the pointer icon</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="s2">&quot;pointer&quot;</span><span class="p">);</span>

                <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-84">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-84">&#182;</a>               </div>               <p>Mouseleave event handler</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="s2">&quot;mouseleave.tocify&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-85">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-85">&#182;</a>               </div>               <p>Removes the hover CSS class from the current list item</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">hoverClass</span><span class="p">);</span>

                <span class="p">}</span>
            <span class="p">});</span>

</pre></div>             </td>           </tr>                               <tr id="section-86">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-86">&#182;</a>               </div>               <p>Window scroll event handler</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;scroll.tocify&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-87">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-87">&#182;</a>               </div>               <p>Once all animations on the page are complete, this callback function will be called</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;html, body&quot;</span><span class="p">).</span><span class="nx">promise</span><span class="p">().</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-88">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-88">&#182;</a>               </div>               <p>Local variables</p>             </td>             <td class="code">               <div class="highlight"><pre>

</pre></div>             </td>           </tr>                               <tr id="section-89">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-89">&#182;</a>               </div>               <p>Stores how far the user has scrolled</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="kd">var</span> <span class="nx">winScrollTop</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">(),</span>

</pre></div>             </td>           </tr>                               <tr id="section-90">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-90">&#182;</a>               </div>               <p>Stores the height of the window</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="nx">winHeight</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">height</span><span class="p">(),</span>

</pre></div>             </td>           </tr>                               <tr id="section-91">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-91">&#182;</a>               </div>               <p>Stores the height of the document</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="nx">docHeight</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">height</span><span class="p">(),</span>

                        <span class="nx">scrollHeight</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">scrollHeight</span><span class="p">,</span>

</pre></div>             </td>           </tr>                               <tr id="section-92">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-92">&#182;</a>               </div>               <p>Instantiates a variable that will be used to hold a selected HTML element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="nx">elem</span><span class="p">,</span>

                        <span class="nx">lastElemOffset</span><span class="p">;</span>

                    <span class="k">if</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">extendPage</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-93">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-93">&#182;</a>               </div>               <p>If the user has scrolled to the bottom of the page and the last toc item is not focused</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="k">if</span><span class="p">((</span><span class="nx">$</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">webkit</span> <span class="o">&amp;&amp;</span> <span class="nx">winScrollTop</span> <span class="o">&gt;=</span> <span class="nx">scrollHeight</span> <span class="o">-</span> <span class="nx">winHeight</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">webkit</span> <span class="o">&amp;&amp;</span> <span class="nx">winHeight</span> <span class="o">+</span> <span class="nx">winScrollTop</span> <span class="o">&gt;</span> <span class="nx">docHeight</span> <span class="o">-</span> <span class="mi">25</span><span class="p">))</span> <span class="p">{</span>

                            <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">(</span><span class="nx">winScrollTop</span><span class="p">);</span>

                            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.tocify-extend-page&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-94">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-94">&#182;</a>               </div>               <p>Gets the top offset of the page header that is linked to the last toc item</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                <span class="nx">lastElemOffset</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div[data-unique=&quot;&#39;</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.item&quot;</span><span class="p">).</span><span class="nx">last</span><span class="p">().</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-unique&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-95">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-95">&#182;</a>               </div>               <p>Appends a div to the bottom of the page and sets the height to the difference of the window scrollTop and the last element's position top offset</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                <span class="nx">$</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">context</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;div /&gt;&quot;</span><span class="p">,</span> <span class="p">{</span>

                                    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;tocify-extend-page&quot;</span><span class="p">,</span>

                                    <span class="s2">&quot;height&quot;</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">lastElemOffset</span> <span class="o">-</span> <span class="nx">winScrollTop</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>

                                <span class="p">}));</span>

                            <span class="p">}</span>

                        <span class="p">}</span>

                    <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-96">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-96">&#182;</a>               </div>               <p>The zero timeout ensures the following code is run after the scroll events</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-97">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-97">&#182;</a>               </div>               <p>Loops through each anchor tag on the page with a <code>name</code> attribute</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="nx">$</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">context</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;div[data-unique]&quot;</span><span class="p">).</span><span class="nx">next</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-98">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-98">&#182;</a>               </div>               <p>If the user has scrolled to within x (the highlightOffset option) distance of the currently traversed anchor tag</p>             </td>             <td class="code">               <div class="highlight"><pre>
                            <span class="k">if</span> <span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">winScrollTop</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">highlightOffset</span><span class="p">))</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-99">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-99">&#182;</a>               </div>               <p>Stores the list item HTML element that corresponds to the currently traversed anchor tag</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                <span class="nx">elem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li[data-unique=&quot;&#39;</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">prev</span><span class="p">(</span><span class="s2">&quot;div[data-unique]&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-unique&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>

</pre></div>             </td>           </tr>                               <tr id="section-100">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-100">&#182;</a>               </div>               <p>If the <code>highlightOnScroll</code> option is true and a next element is found</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                <span class="k">if</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">highlightOnScroll</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-101">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-101">&#182;</a>               </div>               <p>Removes highlighting from all of the list item's</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">self</span><span class="p">.</span><span class="nx">focusClass</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">focusClass</span><span class="p">);</span>

</pre></div>             </td>           </tr>                               <tr id="section-102">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-102">&#182;</a>               </div>               <p>Highlights the corresponding list item</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                    <span class="nx">elem</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">focusClass</span><span class="p">);</span>

                                <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-103">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-103">&#182;</a>               </div>               <p>If the <code>showAndHideOnScroll</code> option is true</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                <span class="k">if</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showAndHideOnScroll</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showAndHide</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-104">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-104">&#182;</a>               </div>               <p>If the current element's parent is a header element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                     <span class="k">if</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;header&quot;</span><span class="p">))</span> <span class="p">{</span>


</pre></div>             </td>           </tr>                               <tr id="section-105">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-105">&#182;</a>               </div>               <p>Shows the next sub-header element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                         <span class="nx">self</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">));</span>

                                     <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-106">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-106">&#182;</a>               </div>               <p>If the current element's parent is a subheader element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                     <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;sub-header&quot;</span><span class="p">))</span> <span class="p">{</span>
 
</pre></div>             </td>           </tr>                               <tr id="section-107">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-107">&#182;</a>               </div>               <p>Shows the parent sub-header element</p>             </td>             <td class="code">               <div class="highlight"><pre>
                                         <span class="nx">self</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">parent</span><span class="p">());</span>

                                     <span class="p">}</span>
                                 <span class="p">}</span>

                                 <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

                            <span class="p">}</span>

                        <span class="p">});</span>

                    <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>

                <span class="p">});</span>

            <span class="p">});</span>

</pre></div>             </td>           </tr>                               <tr id="section-108">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-108">&#182;</a>               </div>               <p>If the History.js plugin has been included on the page</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">History</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">History</span><span class="p">.</span><span class="nx">Adapter</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showAndHide</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-109">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-109">&#182;</a>               </div>               <p>Binds to the StateChange Event</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nb">window</span><span class="p">.</span><span class="nx">History</span><span class="p">.</span><span class="nx">Adapter</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s1">&#39;statechange&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-110">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-110">&#182;</a>               </div>               <p>The list item that corresponds to the state change</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li[data-href=&quot;&#39;</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">History</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>

                    <span class="k">if</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;.header&quot;</span><span class="p">))</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-111">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-111">&#182;</a>               </div>               <p>Show the all of the sub-headers within the current header</p>             </td>             <td class="code">               <div class="highlight"><pre>
                        <span class="nx">self</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">));</span>

                    <span class="p">}</span>

                <span class="p">});</span>

            <span class="p">}</span>

        <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-112">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-112">&#182;</a>               </div>               <h2>Show</h2>

<pre><code> Opens the current sub-header
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-113">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-113">&#182;</a>               </div>               <p>Stores the plugin context in the <code>self</code> variable</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-114">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-114">&#182;</a>               </div>               <p>If the sub-header is not already visible</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:visible&quot;</span><span class="p">))</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-115">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-115">&#182;</a>               </div>               <p>Determines what jQuery effect to use</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="k">switch</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showEffect</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-116">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-116">&#182;</a>               </div>               <p>Uses <code>no effect</code></p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;none&quot;</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-117">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-117">&#182;</a>               </div>               <p>Uses the jQuery <code>show</code> special effect</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;show&quot;</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showEffectSpeed</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-118">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-118">&#182;</a>               </div>               <p>Uses the jQuery <code>slideDown</code> special effect</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;slideDown&quot;</span><span class="o">:</span>
        
                        <span class="nx">elem</span><span class="p">.</span><span class="nx">slideDown</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showEffectSpeed</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-119">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-119">&#182;</a>               </div>               <p>Uses the jQuery <code>fadeIn</code> special effect</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;fadeIn&quot;</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showEffectSpeed</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-120">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-120">&#182;</a>               </div>               <p>If none of the above options were passed, then a <code>jqueryUI show effect</code> is expected</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">default</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>

                    <span class="k">break</span><span class="p">;</span>

                <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-121">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-121">&#182;</a>               </div>               <p>Hides all non-active sub-headers</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="nx">self</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">).</span><span class="nx">not</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;.header&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.sub-header&quot;</span><span class="p">)));</span>

            <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-122">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-122">&#182;</a>               </div>               <p>Maintains chainablity</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-123">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-123">&#182;</a>               </div>               <h2>Hide</h2>

<pre><code> Closes the current sub-header
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-124">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-124">&#182;</a>               </div>               <p>Stores the plugin context in the <code>self</code> variable</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-125">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-125">&#182;</a>               </div>               <p>If the sub-header is already hidden</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:visible&quot;</span><span class="p">))</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-126">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-126">&#182;</a>               </div>               <p>Determines what jQuery effect to use</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="k">switch</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">hideEffect</span><span class="p">)</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-127">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-127">&#182;</a>               </div>               <p>Uses <code>no effect</code></p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;none&quot;</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-128">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-128">&#182;</a>               </div>               <p>Uses the jQuery <code>hide</code> special effect </p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;hide&quot;</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">hideEffectSpeed</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-129">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-129">&#182;</a>               </div>               <p>Uses the jQuery <code>slideUp</code> special effect</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;slideUp&quot;</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">slideUp</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">hideEffectSpeed</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-130">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-130">&#182;</a>               </div>               <p>Uses the jQuery <code>fadeOut</code> special effect</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">case</span> <span class="s2">&quot;fadeOut&quot;</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">hideEffectSpeed</span><span class="p">);</span>

                    <span class="k">break</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-131">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-131">&#182;</a>               </div>               <p>If none of the above options were passed, then a <code>jqueryUI hide effect</code> is expected</p>             </td>             <td class="code">               <div class="highlight"><pre>
                    <span class="k">default</span><span class="o">:</span>

                        <span class="nx">elem</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>

                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-132">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-132">&#182;</a>               </div>               <p>Maintains chainablity</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>

</pre></div>             </td>           </tr>                               <tr id="section-133">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-133">&#182;</a>               </div>               <h2>_addCSSClasses</h2>

<pre><code> Adds CSS classes to the newly generated table of contents HTML
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>
        <span class="nx">_addCSSClasses</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-134">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-134">&#182;</a>               </div>               <p>If the jQueryUI option is set to true</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">jqueryUI</span><span class="p">)</span> <span class="p">{</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">focusClass</span> <span class="o">=</span> <span class="s2">&quot;ui-state-focus&quot;</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">hoverClass</span> <span class="o">=</span> <span class="s2">&quot;ui-state-hover&quot;</span><span class="p">;</span>

</pre></div>             </td>           </tr>                               <tr id="section-135">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-135">&#182;</a>               </div>               <p>Adds the default styling to the dropdown list</p>             </td>             <td class="code">               <div class="highlight"><pre>
                <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-widget&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.toc-title&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-widget-header&quot;</span><span class="p">).</span><span class="nx">end</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-widget-content&quot;</span><span class="p">);</span>

            <span class="p">}</span>

            <span class="k">else</span> <span class="p">{</span>

</pre></div>             </td>           </tr>                               <tr id="section-136">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-136">&#182;</a>               </div>               <p>Adds more neutral classes (instead of jqueryUI)</p>             </td>             <td class="code">               <div class="highlight"><pre>

                <span class="k">this</span><span class="p">.</span><span class="nx">focusClass</span> <span class="o">=</span> <span class="s2">&quot;tocify-focus&quot;</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">hoverClass</span> <span class="o">=</span> <span class="s2">&quot;tocify-hover&quot;</span><span class="p">;</span>

            <span class="p">}</span>

</pre></div>             </td>           </tr>                               <tr id="section-137">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-137">&#182;</a>               </div>               <p>Maintains chainability</p>             </td>             <td class="code">               <div class="highlight"><pre>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>

        <span class="p">}</span>

    <span class="p">});</span>

<span class="p">}));</span> <span class="c1">//end of plugin</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 